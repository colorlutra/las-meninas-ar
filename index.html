<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>ãƒ©ã‚¹ãƒ»ãƒ¡ãƒ‹ãƒ¼ãƒŠã‚¹ (å®‰å®šé‘‘è³ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼)</title>
    
    <!-- A-Frameã¨AR.jsã®ä¾å­˜é–¢ä¿‚ã‚’å‰Šé™¤ -->
    
    <style>
      body { 
        margin: 0; 
        overflow: hidden; 
        background-color: #1a1a1a; /* èƒŒæ™¯ã‚’é»’ã«ã—ã¦ã€ç¾è¡“é¤¨ã®å£ã®ã‚ˆã†ã«è¦‹ã›ã‚‹ */
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        font-family: 'Inter', sans-serif;
      }
      
      /* çµµç”»ã®ã‚³ãƒ³ãƒ†ãƒŠ (å·¨å¤§ãªãƒ•ãƒ¬ãƒ¼ãƒ ã‚’è¡¨ç¾) */
      #painting-container {
        position: relative;
        /* ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚µã‚¤ã‚ºã®ç¾èª¿ç¯€å€¤ 2.5m x 1.152m ã‚’CSSã§å†ç¾ */
        width: 60vh; /* ç”»é¢é«˜ã•ã®60%ã‚’åŸºæº–ã«è¨­å®š */
        height: 130vh; /* 60vh * 2.169 = 130.14vh (ç¸¦é•·) */
        overflow: hidden;
        border: 20px solid #755b41; /* è±ªè¯ãªé¡ç¸ */
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        transition: transform 0.3s ease; /* ã‚¹ãƒ ãƒ¼ã‚ºãªã‚ºãƒ¼ãƒ ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ */
      }

      /* çµµç”»æœ¬ä½“ (å†…éƒ¨ã®ç”»åƒ) */
      #meninas-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        position: absolute;
        top: 0;
        left: 0;
        /* ã‚ºãƒ¼ãƒ ã¨ç§»å‹•ã¯CSSã®transformã§è¡Œã† */
        transform: translate(0, 0) scale(1.0);
        transform-origin: center center;
        transition: transform 0.3s ease;
      }
      
      /* å…¨ã¦ã®ãƒœã‚¿ãƒ³ã®ã‚³ãƒ³ãƒ†ãƒŠ */
      #control-panel {
        position: fixed;
        bottom: 10px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 999;
        display: flex;
        flex-wrap: wrap; 
        justify-content: center;
        gap: 8px; /* ãƒœã‚¿ãƒ³é–“ã®ã‚¹ãƒšãƒ¼ã‚¹ã‚’ç‹­ã */
        max-width: 90vw;
        padding: 10px;
        background-color: rgba(0, 0, 0, 0.6);
        border-radius: 10px;
      }
      
      /* ãƒœã‚¿ãƒ³ã®å…±é€šã‚¹ã‚¿ã‚¤ãƒ« */
      .ar-button {
        padding: 10px 15px;
        color: white;
        border: none;
        border-radius: 20px;
        font-size: 14px;
        font-weight: bold;
        cursor: pointer;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        transition: background-color 0.2s, transform 0.1s;
      }
      .ar-button:active {
        transform: translateY(1px);
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      }

      /* å€‹åˆ¥ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
      #zoom-in-button, #zoom-out-button { background-color: #007bff; } /* é’ */
      #move-up-button, #move-down-button { background-color: #ffc107; color: #333; } /* é»„ */
      #move-left-button, #move-right-button { background-color: #28a745; } /* ç·‘ */
      #info-toggle-button { background-color: #6f42c1; } /* ç´« */

      /* è§£èª¬ãƒ‘ãƒãƒ«ã®ã‚¹ã‚¿ã‚¤ãƒ« */
      #explanation-panel {
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        background-color: rgba(255, 255, 255, 0.95); /* æ˜ã‚‹ã„èƒŒæ™¯ */
        color: #333;
        padding: 15px 25px;
        border-radius: 8px;
        z-index: 998;
        text-align: center;
        width: 80%;
        max-width: 400px;
        pointer-events: auto; /* ã‚¯ãƒªãƒƒã‚¯å¯èƒ½ */
        display: none; 
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      }
      #explanation-panel h3 {
        margin: 0 0 5px 0;
        font-size: 20px;
        color: #6f42c1;
      }
      #explanation-panel p {
        margin: 0;
        font-size: 14px;
      }
    </style>
  </head>
  <body>

    <!-- å·¨å¤§çµµç”»ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒªã‚¢ -->
    <div id="painting-container">
      <img id="meninas-image" src="lasmeninas_transparent.png" alt="Las Meninas">
    </div>

    <!-- ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ« -->
    <div id="control-panel">
      <!-- ã‚ºãƒ¼ãƒ æ“ä½œ -->
      <button id="zoom-in-button" class="ar-button">â• ã‚ºãƒ¼ãƒ </button>
      <button id="zoom-out-button" class="ar-button">â– ç¸®å°</button>
      
      <!-- ç§»å‹•æ“ä½œ -->
      <button id="move-up-button" class="ar-button">â¬†ï¸ ä¸Šã¸</button>
      <button id="move-down-button" class="ar-button">â¬‡ï¸ ä¸‹ã¸</button>
      <button id="move-left-button" class="ar-button">â¬…ï¸ å·¦ã¸</button>
      <button id="move-right-button" class="ar-button">â¡ï¸ å³ã¸</button>

      <!-- è§£èª¬è¡¨ç¤º -->
      <button id="info-toggle-button" class="ar-button">ğŸ’¡ è§£èª¬</button>
      
    </div>

    <!-- è§£èª¬ãƒ‘ãƒãƒ« -->
    <div id="explanation-panel">
      <h3>ãƒ©ã‚¹ãƒ»ãƒ¡ãƒ‹ãƒ¼ãƒŠã‚¹ (å¥³å®˜ãŸã¡)</h3>
      <p>ä½œè€…: ãƒ‡ã‚£ã‚¨ã‚´ãƒ»ãƒ™ãƒ©ã‚¹ã‚±ã‚¹ (1656å¹´é ƒ)<br>
      å ´æ‰€: ã‚¹ãƒšã‚¤ãƒ³ãƒ»ãƒ—ãƒ©ãƒ‰ç¾è¡“é¤¨<br>
      é¡ã®åå°„ã‚„ã€ç”»å®¶è‡ªèº«ãŒæã‹ã‚Œã¦ã„ã‚‹ç‚¹ãŒè¤‡é›‘ãªæ§‹å›³ã‚’ç”Ÿã¿å‡ºã—ã¦ã„ã¾ã™ã€‚<br><br>
      ğŸ’¡ **ä½¿ã„æ–¹**ï¼šã‚ºãƒ¼ãƒ ãƒœã‚¿ãƒ³ã¨çŸ¢å°ãƒœã‚¿ãƒ³ã§ã€çµµç”»ã®è¬ã‚’éš…ã€…ã¾ã§æ¢ã—ã¦ã¿ã‚ˆã†ï¼</p>
    </div>

    <script>
      // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã®è¨­å®š
      const PAINTING_IMAGE = document.getElementById('meninas-image');
      const INFO_PANEL = document.getElementById('explanation-panel');
      
      // çŠ¶æ…‹ç®¡ç†
      let currentScale = 1.0;
      let currentX = 0;
      let currentY = 0;

      // å®šæ•°
      const ZOOM_FACTOR = 0.2; // ã‚ºãƒ¼ãƒ ã®ã‚¹ãƒ†ãƒƒãƒ—
      const MOVE_STEP = 10;    // ç§»å‹•ã®ã‚¹ãƒ†ãƒƒãƒ— (ãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆå˜ä½)
      const MAX_SCALE = 3.0;
      const MIN_SCALE = 1.0;

      /**
       * çµµç”»ã® transform ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä¸€æ‹¬ã§æ›´æ–°ã™ã‚‹
       */
      function updateTransform() {
        PAINTING_IMAGE.style.transform = `translate(${currentX}%, ${currentY}%) scale(${currentScale})`;
      }

      // --- ã‚ºãƒ¼ãƒ æ©Ÿèƒ½ ---
      function zoom(direction) {
        let newScale;
        if (direction === 'in') {
          newScale = Math.min(MAX_SCALE, currentScale + ZOOM_FACTOR);
        } else {
          newScale = Math.max(MIN_SCALE, currentScale - ZOOM_FACTOR);
        }
        
        // ã‚ºãƒ¼ãƒ ãŒå®Ÿéš›ã«ç™ºç”Ÿã—ãŸå ´åˆã®ã¿å‡¦ç†
        if (newScale !== currentScale) {
          currentScale = newScale;
          
          // ã‚ºãƒ¼ãƒ å¾Œã«ã€ç§»å‹•ç¯„å›²ã‚’è¶…ãˆãªã„ã‚ˆã†ã«ä½ç½®ã‚’ä¿®æ­£ (ç‰¹ã«ç¸®å°æ™‚)
          if (currentScale === MIN_SCALE) {
            currentX = 0;
            currentY = 0;
          } else {
            // ã‚¹ã‚±ãƒ¼ãƒ«ã«å¿œã˜ã¦ç§»å‹•å¯èƒ½ç¯„å›²ã‚’è¨ˆç®—
            const maxTranslation = (currentScale - 1) / 2 * 100;

            // ã‚ºãƒ¼ãƒ ã‚¢ã‚¦ãƒˆãªã©ã§ç§»å‹•ç¯„å›²ãŒç‹­ã¾ã£ãŸå ´åˆã€ç¾åœ¨ã®ä½ç½®ãŒç¯„å›²å†…ã‹ãƒã‚§ãƒƒã‚¯ã—ã€ã¯ã¿å‡ºã¦ã„ãŸã‚‰ã‚¯ãƒªãƒƒãƒ—ã™ã‚‹
            currentX = Math.max(-maxTranslation, Math.min(maxTranslation, currentX));
            currentY = Math.max(-maxTranslation, Math.min(maxTranslation, currentY));
          }
          
          updateTransform();
        }
      }

      // --- ç§»å‹•æ©Ÿèƒ½ ---
      function move(axis, step) {
        if (currentScale === MIN_SCALE) return; // ã‚ºãƒ¼ãƒ ã—ã¦ã„ãªã„å ´åˆã¯ç§»å‹•ä¸å¯
        
        const maxTranslation = (currentScale - 1) / 2 * 100;
        
        if (axis === 'X') {
          let newX = currentX + step;
          currentX = Math.max(-maxTranslation, Math.min(maxTranslation, newX));
        } else if (axis === 'Y') {
          let newY = currentY + step;
          currentY = Math.max(-maxTranslation, Math.min(maxTranslation, newY));
        }
        
        updateTransform();
      }


      // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®è¨­å®š
      document.addEventListener('DOMContentLoaded', () => {
        const zoomInButton = document.getElementById('zoom-in-button');
        const zoomOutButton = document.getElementById('zoom-out-button');
        const infoToggleButton = document.getElementById('info-toggle-button');
        
        const moveUpButton = document.getElementById('move-up-button');
        const moveDownButton = document.getElementById('move-down-button');
        const moveLeftButton = document.getElementById('move-left-button');
        const moveRightButton = document.getElementById('move-right-button');

        // ã‚ºãƒ¼ãƒ ã‚¤ãƒ³/ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½
        zoomInButton.addEventListener('click', () => zoom('in'));
        zoomOutButton.addEventListener('click', () => zoom('out'));

        // ç§»å‹•æ©Ÿèƒ½ (Yè»¸ã¯ä¸ŠãŒãƒã‚¤ãƒŠã‚¹æ–¹å‘)
        moveUpButton.addEventListener('click', () => move('Y', -MOVE_STEP));
        moveDownButton.addEventListener('click', () => move('Y', MOVE_STEP));
        moveLeftButton.addEventListener('click', () => move('X', -MOVE_STEP));
        moveRightButton.addEventListener('click', () => move('X', MOVE_STEP));


        // è§£èª¬è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½
        infoToggleButton.addEventListener('click', () => {
          if (INFO_PANEL.style.display === 'block') {
            INFO_PANEL.style.display = 'none';
            infoToggleButton.textContent = 'ğŸ’¡ è§£èª¬';
          } else {
            INFO_PANEL.style.display = 'block';
            infoToggleButton.textContent = 'ğŸ’¡ è§£èª¬ (éè¡¨ç¤º)';
          }
        });
      });
    </script>
  </body>
</html>


































